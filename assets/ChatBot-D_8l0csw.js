import{r as s,j as r,C as k,v as S,i as v}from"./index-BafFKS2H.js";import{a as D}from"./index-ngrFHoWO.js";import{m as c}from"./proxy-Mx__nR9a.js";import{c as C}from"./createLucideIcon-DUxzSBzh.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$=C("send",T);function R({show:j}){const[x,h]=s.useState([]),[o,d]=s.useState([]),[l,f]=s.useState(""),[p,g]=s.useState(!1),m=s.useRef(null),y=s.useRef(new Map),u=s.useMemo(()=>x.map(({question:e,answer:a},t)=>`Q${t+1}: ${e}
A${t+1}: ${a}`).join(`

`),[x]);s.useEffect(()=>{const e=localStorage.getItem("trainingData");e?h(JSON.parse(e)):D.get("https://raw.githubusercontent.com/FakhirAhmedKhan/DataApi-main/refs/heads/main/Data/trainingData.json").then(a=>{const t=a.data.trainingData||[];h(t),localStorage.setItem("trainingData",JSON.stringify(t))}).catch(a=>console.error("Error fetching Data:",a))},[]),s.useEffect(()=>{m.current?.scrollTo({top:m.current.scrollHeight,behavior:"smooth"})},[o,p]);const b=s.useCallback(async(e,a)=>{if(e.length){if(y.current.has(a)){const t=y.current.get(a);d(n=>[...n,{role:"model",text:t}]);return}g(!0);try{const t=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDxNRzdeVtQEKv5r5R_BAhmPLm296ysAcg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[...u?[{role:"user",parts:[{text:u}]}]:[],...e.map(({role:i,text:N})=>({role:i,parts:[{text:N}]}))]})});if(!t.ok){const i=await t.json();console.error("API Error:",i),g(!1);return}const n=(await t.json())?.candidates?.[0]?.content?.parts?.[0]?.text?.replace(/<[^>]+>/g,"").trim();n&&(y.current.set(a,n),d(i=>[...i,{role:"model",text:n}]))}catch(t){console.error("Bot response error:",t)}finally{g(!1)}}},[u]),w=s.useCallback(async e=>{e.preventDefault();const a=l.trim();if(!a)return;const t=[...o,{role:"user",text:a}];d(t),f(""),await b(t,a)},[l,o,b]);return j?r.jsxs(c.section,{className:`${k} fixed bottom-6 right-6 w-80 md:w-96 h-[500px] rounded-2xl shadow-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 flex flex-col`,initial:{opacity:0,scale:.8,y:40},animate:{opacity:1,scale:1,y:0},transition:{type:"spring",stiffness:120,damping:15},children:[r.jsxs("div",{ref:m,className:`${S} flex-1 overflow-y-auto p-4 space-y-4`,children:[o.length===0&&r.jsx(c.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"flex items-start gap-2",children:r.jsx("span",{className:"px-4 py-2 rounded-xl bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100 shadow-sm",children:"ðŸ¤– Hi there! Welcome to my portfolio. How may I assist you today?"})}),o.map((e,a)=>r.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`flex ${e.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`px-4 py-2 max-w-[75%] rounded-xl shadow-sm ${e.role==="user"?"bg-indigo-500 text-white rounded-br-none":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,children:e.text})},a)),p&&r.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start gap-2",children:r.jsx("span",{className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-sm animate-pulse",children:"ðŸ¤– Bot is typing..."})})]}),r.jsxs("form",{onSubmit:w,className:"p-3 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[r.jsx("input",{type:"text",placeholder:"Type a message...",value:l,onChange:e=>f(e.target.value),className:`${v} flex-1 px-4 py-2 rounded-xl`,"aria-label":"Type your message"}),r.jsx("button",{type:"submit",disabled:!l.trim()||p,className:"p-2 rounded-full bg-indigo-500 text-white hover:bg-indigo-600 disabled:opacity-50",children:r.jsx($,{className:"w-5 h-5"})})]})]}):null}export{R as default};
