import{r as s,j as a,C as N,w as v,i as S}from"./index-B2EyBMaY.js";import{a as C}from"./index-ngrFHoWO.js";import{m as c}from"./proxy-CNBohv62.js";import{c as T}from"./createLucideIcon-cBGzoEZz.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],A=T("send",$);function I({show:b}){const[x,j]=s.useState([]),[o,d]=s.useState([]),[l,h]=s.useState(""),[p,m]=s.useState(!1),y=s.useRef(null),g=s.useRef(new Map),u=s.useMemo(()=>x.map(({question:e,answer:r},t)=>`Q${t+1}: ${e}
A${t+1}: ${r}`).join(`

`),[x]);s.useEffect(()=>{C.get("https://raw.githubusercontent.com/FakhirAhmedKhan/DataApi-main/refs/heads/main/data.json").then(e=>j(e.data.trainingData||[])).catch(e=>console.error("Error fetching Data:",e))},[]),s.useEffect(()=>{y.current?.scrollTo({top:y.current.scrollHeight,behavior:"smooth"})},[o,p]);const f=s.useCallback(async(e,r)=>{if(e.length){if(g.current.has(r)){const t=g.current.get(r);d(n=>[...n,{role:"model",text:t}]);return}m(!0);try{const t=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDxNRzdeVtQEKv5r5R_BAhmPLm296ysAcg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[...u?[{role:"user",parts:[{text:u}]}]:[],...e.map(({role:i,text:k})=>({role:i,parts:[{text:k}]}))]})});if(!t.ok){const i=await t.json();console.error("API Error:",i),m(!1);return}const n=(await t.json())?.candidates?.[0]?.content?.parts?.[0]?.text?.replace(/<[^>]+>/g,"").trim();n&&(g.current.set(r,n),d(i=>[...i,{role:"model",text:n}]))}catch(t){console.error("Bot response error:",t)}finally{m(!1)}}},[u]),w=s.useCallback(async e=>{e.preventDefault();const r=l.trim();if(!r)return;const t=[...o,{role:"user",text:r}];d(t),h(""),await f(t,r)},[l,o,f]);return b?a.jsxs(c.section,{className:`${N} fixed bottom-6 right-6 w-80 md:w-96 h-[500px] rounded-2xl shadow-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 flex flex-col`,initial:{opacity:0,scale:.8,y:40},animate:{opacity:1,scale:1,y:0},transition:{type:"spring",stiffness:120,damping:15},children:[a.jsxs("div",{ref:y,className:`${v} flex-1 overflow-y-auto p-4 space-y-4`,children:[o.length===0&&a.jsx(c.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"flex items-start gap-2",children:a.jsx("span",{className:"px-4 py-2 rounded-xl bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100 shadow-sm",children:"ðŸ¤– Hi there! Welcome to my portfolio. How may I assist you today?"})}),o.map((e,r)=>a.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`flex ${e.role==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`px-4 py-2 max-w-[75%] rounded-xl shadow-sm ${e.role==="user"?"bg-indigo-500 text-white rounded-br-none":"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,children:e.text})},r)),p&&a.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start gap-2",children:a.jsx("span",{className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-sm animate-pulse",children:"ðŸ¤– Bot is typing..."})})]}),a.jsxs("form",{onSubmit:w,className:"p-3 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[a.jsx("input",{type:"text",placeholder:"Type a message...",value:l,onChange:e=>h(e.target.value),className:`${S} flex-1 px-4 py-2 rounded-xl`,"aria-label":"Type your message"}),a.jsx("button",{type:"submit",disabled:!l.trim()||p,className:"p-2 rounded-full bg-indigo-500 text-white hover:bg-indigo-600 disabled:opacity-50",children:a.jsx(A,{className:"w-5 h-5"})})]})]}):null}export{I as default};
